pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--shootertest

function _init()
  -- player ship position
  player_x = 60  -- center horizontally (128/2 - 4)
  player_y = 120 -- at the bottom of screen
  player_speed = 2 -- movement speed
  
  -- bullet system
  bullets = {}
  bullet_speed = 4
  
  -- debug: add a stationary laser right above player to see alignment
  --[[
  add(bullets, {
    x = player_x,  -- exactly at player x position
    y = player_y - 8,  -- just above player sprite
    debug = true  -- mark as debug so it doesn't move
  })
  --]]
end

function _update()
  -- player movement controls
  if btn(0) then -- left arrow
    player_x = player_x - player_speed
  end
  if btn(1) then -- right arrow
    player_x = player_x + player_speed
  end
  
  -- keep player on screen
  if player_x < 0 then
    player_x = 0
  end
  if player_x > 120 then -- 128 - 8 (sprite width)
    player_x = 120
  end
  
  -- shooting
  if btnp(5) then -- X button (button 5)
    -- create new bullet at player position
    add(bullets, {
      x = player_x, -- same as debug beam position
      y = player_y - 8  -- just above player sprite
    })
  end
  
  -- update bullets
  for bullet in all(bullets) do
    -- only move non-debug bullets
    if not bullet.debug then
      bullet.y = bullet.y - bullet_speed
      
      -- remove bullets that go off screen
      if bullet.y < -8 then
        del(bullets, bullet)
      end
    end
  end
end

function _draw()
  -- clear screen
  cls()
  
  -- draw background map
  map(0, 0, 0, 0, 16, 16)
  
  -- draw bullets
  for bullet in all(bullets) do
    spr(17, bullet.x, bullet.y) -- sprite #017
  end
  
  -- draw player ship (sprite 1)
  spr(1, player_x, player_y)
end
__gfx__
00000000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000066000000000000a00000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000666600088888800000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000066660088888888000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000666666088888888000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666660888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000666600008888000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660000008800000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0300000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
