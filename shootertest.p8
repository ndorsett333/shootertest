pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--init

function _init()
  -- player ship position
  player_x = 60  -- center horizontally (128/2 - 4)
  player_y = 110 -- right above player stats bar
  player_speed = 2 -- movement speed
  
  -- bullet system
  bullets = {}
  bullet_speed = 4
  
  -- shooting cooldown
  fire_cooldown = 0
  fire_delay = 10  -- frames between shots
  
  -- debug: add a stationary laser right above player to see alignment
  --[[
  add(bullets, {
    x = player_x,  -- exactly at player x position
    y = player_y - 8,  -- just above player sprite
    debug = true  -- mark as debug so it doesn't move
  })
  --]]
end




-->8
--update

function _update()
  -- player movement controls
  if btn(0) then -- left arrow
    player_x = player_x - player_speed
  end
  if btn(1) then -- right arrow
    player_x = player_x + player_speed
  end
  
  -- keep player on screen
  if player_x < 0 then
    player_x = 0
  end
  if player_x > 120 then -- 128 - 8 (sprite width)
    player_x = 120
  end
  
  -- update fire cooldown
  if fire_cooldown > 0 then
    fire_cooldown = fire_cooldown - 1
  end
  
  -- shooting
  if btnp(5) and fire_cooldown <= 0 then -- X button (button 5)
    -- play laser sound
    sfx(0)
    
    -- create new bullet at player position
    add(bullets, {
      x = player_x, -- same as debug beam position
      y = player_y - 8  -- just above player sprite
    })
    
    -- set cooldown to prevent auto-fire
    fire_cooldown = fire_delay
  end
  
  -- update bullets
  for bullet in all(bullets) do
    -- only move non-debug bullets
    if not bullet.debug then
      bullet.y = bullet.y - bullet_speed
      
      -- remove bullets that go off screen
      if bullet.y < -8 then
        del(bullets, bullet)
      end
    end
  end
end
-->8
--draw

function _draw()
  -- clear screen
  cls()
  
  -- draw background map
  map(0, 0, 0, 0, 16, 16)
  
  -- draw bullets
  for bullet in all(bullets) do
    spr(17, bullet.x, bullet.y) -- sprite #017
  end
  
  -- draw player ship (sprite 1)
  spr(1, player_x, player_y)
end
__gfx__
00000000000660000000000000000000000000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660000000000007000000000007001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006666000888888000000000007000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006116008888888800000070000000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066116608888888800070000000000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666116660888888000000000000000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006666000088880000000000007000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660000008800000000000000000701111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001111111107000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660001111111100000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660001881881100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660001888881100700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660001188811100000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001118111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0314000000000000000000140000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000003000000130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000014000000001400000013000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000014000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000140000130000000000000013000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000003000000030000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000031300140000000300130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000140000130000000000000000130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000004000400000000000000001300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0300000000040000040000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212120505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000500001e65020650216502760027600276002760025100251002710028100000000000026700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
